<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#2e2a8f">
    <meta name="description" content="Gemini Flash —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á–∏ —Å —Ç—Ä–æ–π–Ω–æ–π –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–æ–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º">

    <title>Gemini Study Copilot</title>

    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>
<body>
    <div class="app-shell">
        <header class="app-header">
            <div class="header-inner">
                <div class="brand">
                    <div class="brand-mark">üìö</div>
                    <div class="brand-text">
                        <h1>Gemini Study Copilot</h1>
                        <p>–¢—Ä–∏–∂–¥—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ª—é–±—ã—Ö –∑–∞–¥–∞—á</p>
                    </div>
                </div>
                <div class="header-actions">
                    <button id="api-key-btn" class="pill-btn pill-btn-outline" aria-haspopup="dialog">
                        –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Gemini
                    </button>
                    <button id="theme-toggle" class="icon-btn" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                        <svg class="theme-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                    </button>
                    <button id="history-btn" class="icon-btn" aria-label="–ò—Å—Ç–æ—Ä–∏—è">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <main class="main-layout">
            <section class="hero" id="hero">
                <div class="hero-copy">
                    <h2>–£—á–∏—Å—å –±—ã—Å—Ç—Ä–µ–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Gemini Flash</h2>
                    <p>
                        –ó–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ –∏–ª–∏ –≤–ø–∏—à–∏ —É—Å–ª–æ–≤–∏–µ ‚Äî –º—ã —Ç—Ä–∏–∂–¥—ã —Ä–µ—à–∏–º –∑–∞–¥–∞—á—É, –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏–º –æ—Ç–≤–µ—Ç—ã –∏ –æ—Ç–¥–∞—ë–º —Ç–æ–ª—å–∫–æ –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç.
                        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—Ç—Å—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏ –∏ –æ—Ü–µ–Ω–∫–æ–π –∫–∞—á–µ—Å—Ç–≤–∞.
                    </p>
                    <div class="hero-actions">
                        <button class="pill-btn pill-btn-primary" id="hero-start-btn">–ù–∞—á–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ</button>
                        <button class="pill-btn pill-btn-ghost" id="hero-api-btn">–î–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á</button>
                    </div>
                    <ul class="hero-features">
                        <li>‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ Gemini 1.5 Flash</li>
                        <li>üß† –ê–ª–≥–æ—Ä–∏—Ç–º —Ç—Ä–æ–π–Ω–æ–π –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –¥—É—Ö–µ Grok Heavy</li>
                        <li>üîê –õ–∏—á–Ω—ã–µ –∫–ª—é—á–∏, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ</li>
                    </ul>
                </div>
                <div class="hero-visual">
                    <div class="mockup-card">
                        <h3>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
                        <ol>
                            <li>–ó–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ –∏–ª–∏ –≤–ø–∏—à–∏ —É—Å–ª–æ–≤–∏–µ –≤—Ä—É—á–Ω—É—é.</li>
                            <li>–ú—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º Gemini —Ç—Ä–∏–∂–¥—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞–º–∏.</li>
                            <li>–û—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –∏ –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–æ—á–Ω—ã–π.</li>
                        </ol>
                        <div class="mockup-highlight">–¢–æ–ª—å–∫–æ —Ä–µ—à–µ–Ω–∏–µ —Å 100/100 –ø–æ–ø–∞–¥–∞–µ—Ç –∫ —Ç–µ–±–µ.</div>
                    </div>
                </div>
            </section>

            <div id="status-bar" class="status-bar hidden">
                <div class="status-icon">‚ÑπÔ∏è</div>
                <div class="status-text"></div>
            </div>

            <section class="workspace" id="workspace">
                <div id="input-section" class="panel">
                    <div class="panel-header">
                        <h2>–†–µ—à–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</h2>
                        <p>–í—ã–±–µ—Ä–∏ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî —Ñ–æ—Ç–æ, —Ñ–∞–π–ª –∏–ª–∏ —Ç–µ–∫—Å—Ç.</p>
                    </div>

                    <div class="input-grid">
                        <button id="camera-btn" class="action-tile">
                            <div class="tile-icon">üì∏</div>
                            <div class="tile-title">–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å</div>
                            <div class="tile-desc">–û—Ç–∫—Ä–æ–µ—Ç—Å—è –∫–∞–º–µ—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
                        </button>
                        <button id="upload-btn" class="action-tile">
                            <div class="tile-icon">üñºÔ∏è</div>
                            <div class="tile-title">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –≥–∞–ª–µ—Ä–µ–∏</div>
                            <div class="tile-desc">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ PNG, JPG, HEIC</div>
                        </button>
                        <button id="paste-btn" class="action-tile">
                            <div class="tile-icon">üìã</div>
                            <div class="tile-title">–í—Å—Ç–∞–≤–∏—Ç—å –∏–∑ –±—É—Ñ–µ—Ä–∞</div>
                            <div class="tile-desc">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ç–µ–∫—Å—Ç</div>
                        </button>
                    </div>

                    <input type="file" id="file-input" accept="image/*" capture="environment" hidden>
                    <input type="file" id="upload-input" accept="image/*" hidden>

                    <div id="preview-container" class="preview-container hidden">
                        <img id="preview-image" class="preview-image" alt="–ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
                        <button id="remove-image" class="pill-btn pill-btn-outline">–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ</button>
                    </div>

                    <label for="text-input" class="field-label">–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∑–∞–¥–∞—á—É –≤—Ä—É—á–Ω—É—é</label>
                    <textarea id="text-input" class="text-input" rows="5" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –†–µ—à–∏—Ç–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ 2x + 5 = 15"></textarea>

                    <button id="solve-btn" class="cta-btn" disabled>
                        <span class="cta-label">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç—Ä–æ–π–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É</span>
                        <span class="cta-sub">3 –ø—Ä–æ–≥–æ–Ω–∞ + –∞–≤—Ç–æ–æ—Ü–µ–Ω–∫–∞ 100/100</span>
                    </button>
                </div>

                <section id="processing-section" class="panel hidden">
                    <div class="processing-card">
                        <div class="spinner"></div>
                        <div class="processing-copy">
                            <h3 id="processing-title">–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è...</h3>
                            <p id="processing-text">–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å —Ñ–æ—Ç–æ</p>
                        </div>
                    </div>
                </section>

                <section id="solution-section" class="panel hidden">
                    <div class="panel-header with-action">
                        <div>
                            <h2>–õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ</h2>
                            <p>–ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç, –ø–æ–ª—É—á–∏–≤—à–∏–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª</p>
                        </div>
                        <button id="new-task-btn" class="pill-btn pill-btn-outline">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</button>
                    </div>

                    <div id="recognized-text" class="recognized-block hidden">
                        <h3>–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞</h3>
                        <div id="recognized-content" class="recognized-content"></div>
                    </div>

                    <article id="solution-content" class="solution-content"></article>

                    <div id="evaluation-results" class="evaluation-card hidden">
                        <header>
                            <h3>–ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–∞ Gemini</h3>
                            <p>–ö–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞ –æ—Ü–µ–Ω–µ–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º</p>
                        </header>
                        <div class="evaluation-summary">
                            <div class="score-display">
                                –ò—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–ª: <span id="evaluation-score">-</span>
                            </div>
                            <div id="evaluation-note" class="evaluation-note hidden"></div>
                        </div>
                        <ul id="alternatives-list" class="alternatives-list"></ul>
                    </div>

                    <div class="panel-footer">
                        <button id="save-solution-btn" class="pill-btn pill-btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é</button>
                    </div>
                </section>

                <section id="history-section" class="panel hidden">
                    <div class="panel-header with-action">
                        <div>
                            <h2>–ò—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏–π</h2>
                            <p>–í—Å–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫–µ–π—Å—ã –Ω–∞ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ</p>
                        </div>
                        <button id="close-history-btn" class="pill-btn pill-btn-outline">–ó–∞–∫—Ä—ã—Ç—å</button>
                    </div>

                    <div id="history-list" class="history-list">
                        <p class="empty-history">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</p>
                    </div>

                    <div class="panel-footer">
                        <button id="clear-history-btn" class="pill-btn pill-btn-danger">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                    </div>
                </section>
            </section>
        </main>

        <footer class="app-footer">
            <div>
                <strong>–†–µ–∂–∏–º —Å–µ—Ç–∏:</strong>
                <span id="offline-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
            </div>
            <p>–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–±–ª–∞—á–Ω–æ–π –º–æ–¥–µ–ª–∏ Gemini 1.5 Flash. –†–µ—à–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç—Ä–∏–∂–¥—ã –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º.</p>
        </footer>
    </div>

    <div id="api-key-dialog" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="api-key-title">
        <div class="modal-backdrop" id="api-key-backdrop"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="api-key-title">–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Å–≤–æ–π Gemini API –∫–ª—é—á</h2>
                <button id="api-key-close" class="icon-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ">
                    <span aria-hidden="true">‚úï</span>
                </button>
            </header>
            <p class="modal-description">
                –ö–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Gemini Flash.
                –ü–æ–ª—É—á–∏—Ç–µ –µ–≥–æ –≤ <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener">Google AI Studio</a>.
            </p>
            <label for="api-key-input" class="field-label">API –∫–ª—é—á Gemini</label>
            <input id="api-key-input" type="password" class="text-input" placeholder="AIza...">
            <div class="modal-actions">
                <button id="api-key-save" class="pill-btn pill-btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button id="api-key-clear" class="pill-btn pill-btn-danger">–£–¥–∞–ª–∏—Ç—å –∫–ª—é—á</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>
